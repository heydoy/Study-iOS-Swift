# iOS 강의-ch2 첫 앱 만들기-10~21

# iOS # 강의# -ch2 # 첫#  # 앱#  # 만들기# -10~21

## 중간점검##   ## 

여태 이런  것들을 배웠습니다. 
* 목표와 할일 정리 
* 버튼과 액션

* 문제 해결

* 앱 동작 방식 이해 

앞으로 이런 내용들을 배울 것. 

* Object, data, Method
* Strings and Variable
* Connecting Outlet
* Writing Method
* Local vs Instance variable
* Closure

-
## Object, Data, Method

### O### bject ### 이해하기### 

여태까지는 유저인터페이스를 이용해  앱을 만들어보았다. 이제는 Swift, 객체지향 프로그래밍(Object Oriented Programming, OOP)에 대해 알아볼 것

앱은 Object로 구성된다.

Object
* data
* method  : 오브젝트에 속해서 기능을 수행함.

로 구성되어 있다. 

### String### 과###  Variable ### 이해하기### 

**String**

![iOS 강의-ch2 첫 앱 만들기-10~21](images/iOS%20강의-ch2%20첫%20앱%20만들기-10~21.png)

: 문자열의 나열  

Swift에는 String Interpolation이라는 기능이 있다. 이 기능을 이용해  변수의 값을 문자열에 삽입할 수 있다. 

![iOS 강의-ch2 첫 앱 만들기-10~21-1](images/iOS%20강의-ch2%20첫%20앱%20만들기-10~21-1.png)

인터폴레이션 해보기  

![iOS 강의-ch2 첫 앱 만들기-10~21-2](images/iOS%20강의-ch2%20첫%20앱%20만들기-10~21-2.png)

// arc4random_uniform은 0부터 지정한 숫자-1까지 랜덤한 숫자를 가져옴.
        **let** randomPrice = arc4random_uniform(10000) + 1
 //타입캐스팅

currentValue = Int(randomPrice)

**Variable**

변수. 값을 저장할 수 있는 공간. 값을 채워넣고 값을 나중에 이용할 때 변수를 사용할 수 있다. View Controller를 포함한 오브젝트들은 앞서 배운 것처럼, 이런 변수들을 많이 가지고 있다. 

![iOS 강의-ch2 첫 앱 만들기-10~21-3](images/iOS%20강의-ch2%20첫%20앱%20만들기-10~21-3.png)

상자를 변수에 많이 빗대어 표현한다. 

**Type**

컴퓨터도 어떤 걸 저장하느냐에 따라서 변수를 준비한다. 

- 

결론적으로 오브젝트는 변수를 통해 값을 Tracking 할 수 있다.  

### Outlet  ### 연결하기### 

그림액자앱(My Pics)에서 Label 의 값을 바꿔주려면 UILabel이 View Controller에 연결이 되어있어야 한다. 그래야 업데이트를 시켜줄 수 있음. 이것을 연결하는 방법을 아울렛 연결하기라고 한다. 

![iOS 강의-ch2 첫 앱 만들기-10~21-4](images/iOS%20강의-ch2%20첫%20앱%20만들기-10~21-4.png)

컴포넌트 클릭 후 ctrl 눌러서 코드창으로 드래그한다.

![iOS 강의-ch2 첫 앱 만들기-10~21-5](images/iOS%20강의-ch2%20첫%20앱%20만들기-10~21-5.png)

연결한 후 기존에 배운 String Interpolation을 통해 텍스트를 업데이트한다.

![iOS 강의-ch2 첫 앱 만들기-10~21-6](images/iOS%20강의-ch2%20첫%20앱%20만들기-10~21-6.png)

![iOS 강의-ch2 첫 앱 만들기-10~21-7](images/iOS%20강의-ch2%20첫%20앱%20만들기-10~21-7.png)

리프레시 할 때마다 새로운 가격이 적용되는 것을 확인할 수 있다. 

아울렛을 연결했기 때문에 연결된 UILabel의  텍스트를 코드 내부적으로 업데이트 할 수 있었다. 

* Summary

Action을 연결하는 것과 Outlet을 연결하는 것을 두가지 해보았다. 

### V### ariable vs. Constant  ### 변수와###   ### 상수### 

var를 이용하여 선언하면 Variable
let을 이용하여 선언하면 Constant

* 이 둘의 차이 

var 키워드를 이용해서 만든  변수는 박스에 넣어둔 Value를 나중에 변경할 수 있도록 만든 것이다.
![iOS 강의-ch2 첫 앱 만들기-10~21-8](images/iOS%20강의-ch2%20첫%20앱%20만들기-10~21-8.png)

let 키워드를 이용하여 만들면 한번 VALUE를 넣으면 끝. 바꿀 수없다. 

![iOS 강의-ch2 첫 앱 만들기-10~21-9](images/iOS%20강의-ch2%20첫%20앱%20만들기-10~21-9.png)

* 언제 무엇을 이용해야할까? 

- 실무에서는 최대한 Variable을 적게 사용하고 Constant를 많이 사용하는 것을 권장한다. 이유는 Variable은 중간에 변경이 쉽게 될 수 있어서 버그를 발생시킬 수 있기 때문 
- 그래서 될 수  있으면 let을  이용해 선언하고, 변경이 필요한 경우 키워드를 var로 바꾸는 것을 추천함. 

### Writing Method  ### 메소드###  ### 작성하기### 

오브젝트는 크게 데이터와 메소드로 구현되어 있다. 메소드는 기능을 수행하는 코드로 구성됨. 

viewDidLoad()나 showAlert()이 모두 메소드 

개발자들 사이에서 중요한 철학 중, 중복되는 코드가 많은 것은 기술부채를 만들기 때문에 중복코드가 보이면 하나의 메서드를 만들어야 한다. 

![iOS 강의-ch2 첫 앱 만들기-10~21-10](images/iOS%20강의-ch2%20첫%20앱%20만들기-10~21-10.png)

random으로 1만 이하의 숫자로 UILabel을 바뀌는 함수를 위와 같이 만들었다. 

해당하는 자리에만 refresh()함수를 호출하면 된다.

같은 코드인데 메서드를 만들어놓으면, 하나의 코드만 수정하면 되어 더욱 효율적 

그런 방법들이 모여서 클린 코드를 만든다. 
(= 중복코드 메서드로 만들기) 

* 함수 선언하는 방법 

func 함수이름(변수명: 타입, 변수명: 타입, …){
}

메서드나 함수의 경우 최대한 한 가지 동작을 하는 식으로 작성을 해야한다. 
(=메서드가 짧아져야한다.)

### Type Inference ### 타입추론###   

Swift에서 제공하는 강력한 기능. 
예를 들어 View Controller에서 priceLabel은 UILabel이라는 타입이라고 적어놓았지만 currentValue는 타입이 적혀있지 않다.  
![iOS 강의-ch2 첫 앱 만들기-10~21-11](images/iOS%20강의-ch2%20첫%20앱%20만들기-10~21-11.png)

option 키를 누른 상태로 마우스  커서를  변수명 위에 가져다대면 ?가 뜨는데 그때 클릭하면 변수 타입을 알 수 있다. 

![iOS 강의-ch2 첫 앱 만들기-10~21-12](images/iOS%20강의-ch2%20첫%20앱%20만들기-10~21-12.png)

이걸 스위프트에서는 타입추론을 한다고 한다. 

![iOS 강의-ch2 첫 앱 만들기-10~21-13](images/iOS%20강의-ch2%20첫%20앱%20만들기-10~21-13.png)

원래는 

let meessage: String = "가격은 \(currentValue)원 입니다."
로 명시적으로 변수의 타입을 적어주어야 하지만 적어주지 않아도 Swift에서 어느 정도 유추해서 사용가능하게 하는 것을 타입추론이라고 한다. 

이런 강력한 기능을 제공하기 때문에 SWIFT언어 프로그래밍을 쉽게 할 수 있다. 

-
### 로컬###  ### 변수### -### 인스턴스변수###  Local vs. Instance Variable

변수는 사용가능한 범위가 다르다. 
예를 들면 어떤 변수는 특정 메소드 안에서만 사용되는가 하면, 어떤 변수는 오브젝트 전반적으로 사용이 가능하다. 

* 메소드 안에서만 사용되는 변수 : 로컬 변수 
* 오브젝트 안에서 쓰이는 변수(오브젝트와 생을 같이하는 변수)  : 인스턴스 변수 

![iOS 강의-ch2 첫 앱 만들기-10~21-14](images/iOS%20강의-ch2%20첫%20앱%20만들기-10~21-14.png)

![iOS 강의-ch2 첫 앱 만들기-10~21-15](images/iOS%20강의-ch2%20첫%20앱%20만들기-10~21-15.png)

-
### 클로져###  Closure

이전 예제에서 Refresh버튼을 누르면 ALERT이 뜨는데 알럿창의 확인 버튼을 누르지도 않았는데, 가격이 바뀐 것을 확인할 수 있다. 원래 의도는 OK버튼을 누르고 나서 알럿이 없어지면 가격이 업데이트 되는 것. 이 문제를 해결할 수 있는 것이 클로져 

Closure = { }

쉽게 얘기하면, 실행가능한 코드 블럭. 변수처럼 함수에 넘겨줄 수 있다. 이걸 이용해 OK버튼이 눌리고 끝났을 때 refresh가 되는 것을 코드블럭을 작성해 넘겨줄 수 있다. 

![iOS 강의-ch2 첫 앱 만들기-10~21-16](images/iOS%20강의-ch2%20첫%20앱%20만들기-10~21-16.png)

왜 그러냐면, 버튼을 눌렀을 때 알럿을 띄우는 코드를 보면, 알럿을 띄움과 동시에 refresh()가 됨. 
![iOS 강의-ch2 첫 앱 만들기-10~21-17](images/iOS%20강의-ch2%20첫%20앱%20만들기-10~21-17.png)

여기서 해결할 수 있다. 
![iOS 강의-ch2 첫 앱 만들기-10~21-18](images/iOS%20강의-ch2%20첫%20앱%20만들기-10~21-18.png)

UIAlertAction이 OK버튼에 대응. OK버튼이 눌렸을 때 무언가를 실행가능한 코드를 넣으면 그때 실행하게 됨.  

![iOS 강의-ch2 첫 앱 만들기-10~21-19](images/iOS%20강의-ch2%20첫%20앱%20만들기-10~21-19.png)

기존의 handler : nil 이

handler : { action in self.refresh() } 
형태로 들어감 

핸들러 안에 함수처럼 실행가능한 코드 블럭{ } 을 넣음. 
메소드를 호출하는 소괄호 () 안에 함수{} 를 넣은 것. 

![iOS 강의-ch2 첫 앱 만들기-10~21-20](images/iOS%20강의-ch2%20첫%20앱%20만들기-10~21-20.png)

이렇게 바꾸면 알럿창의 OK 버튼이 눌린 다음 창이 없어져야 가격이 바뀜. 

_클로져는__ __실행가능한__ __코드__ __블럭__ = { }_

_실행가능한__ __코드블럭이__ __파라미터로서__ __넘겨질__ __수__ __있다는__ __점을__ __알__ __것__. _

-
## 스타일링##  Styling
앱을 구성하는 단계에서 앱을 예쁘게 만드는 스타일링

![iOS 강의-ch2 첫 앱 만들기-10~21-21](images/iOS%20강의-ch2%20첫%20앱%20만들기-10~21-21.png)

* 이미지와 레이블 스타일링 
* 버튼 스타일링 
* 오토레이아웃 : 다양한 해상도의 디바이스에 대응하는 방법 
* 앱 아이콘과 디스플레이의 이름

### 이미지###  Image
ios 이미지에 관련한 이미지 기초 지식 
![iOS 강의-ch2 첫 앱 만들기-10~21-22](images/iOS%20강의-ch2%20첫%20앱%20만들기-10~21-22.png)

기본적으로 아이폰은 3가지 사이즈 이미지를 받아 사용할 수 있다. 
1x, 2x, 3x는 해상도를 의미. 개발자들은 pt(point)를 기본으로, 디자이너는 px(pixel)을 기준으로. 

예전에는 pt와 px 이 동일하게  표현되었다. 
기술이 좋아져서 1pt에 2px~3px까지도  표현이 됨. 

앱은 디바이스에 따라서 앱에서 표현되는 이미지를 다르게 사용. 

고해상도는 고화질, 저해상도는 저화질 (1x는 아이폰 4, 2x는 레티나 디스플레이: 아이폰 7, 8,  3x는 hd : 주로 큰 화면을 가진 기기) 

-
이미지 넣는 방법 
왼쪽에 Asset을 누르고 뜨는 목록창에 이미지를 드래그앤 드롭

![iOS 강의-ch2 첫 앱 만들기-10~21-23](images/iOS%20강의-ch2%20첫%20앱%20만들기-10~21-23.png)

강아지 이미지에 @2x라고 써있다. 

dog@2x.jpg

![iOS 강의-ch2 첫 앱 만들기-10~21-24](images/iOS%20강의-ch2%20첫%20앱%20만들기-10~21-24.png)

이거는 xcode에게 레티나 디스플레이용이라고 알려주는 것

이미지를 넣어보자

UIImageView 선택 후 Attributes Inspector의 Image 탭에서 선택 

![iOS 강의-ch2 첫 앱 만들기-10~21-25](images/iOS%20강의-ch2%20첫%20앱%20만들기-10~21-25.png)

사용자가 입력한 이미지외에도 애플에서 제공해주는 아이콘을 가져다 써도 된다. 이미지 애셋 카탈로그에 이미지를 넣어 써도 된다. 

![iOS 강의-ch2 첫 앱 만들기-10~21-26](images/iOS%20강의-ch2%20첫%20앱%20만들기-10~21-26.png)

선택한 이미지가 영역보다 작게 들어가서, 이를 채우고 싶을 때는 
콘텐트 모드를 Aspect fit이 아니라 Aspect fill로 바꾸면 된다. 
![iOS 강의-ch2 첫 앱 만들기-10~21-27](images/iOS%20강의-ch2%20첫%20앱%20만들기-10~21-27.png)

![iOS 강의-ch2 첫 앱 만들기-10~21-28](images/iOS%20강의-ch2%20첫%20앱%20만들기-10~21-28.png)

글자의 색상도 SYSTEM 색상이 아닌 custom color로 지정할 수 있다. 
![iOS 강의-ch2 첫 앱 만들기-10~21-29](images/iOS%20강의-ch2%20첫%20앱%20만들기-10~21-29.png)

![iOS 강의-ch2 첫 앱 만들기-10~21-30](images/iOS%20강의-ch2%20첫%20앱%20만들기-10~21-30.png)

이제 빌드 앤 런을 하게 되면 
![iOS 강의-ch2 첫 앱 만들기-10~21-31](images/iOS%20강의-ch2%20첫%20앱%20만들기-10~21-31.png)

이런 화면이 나옴. 

Settings에서 Developer에서 Dark Appearance를 클릭하여 다크모드를 확인해볼 수 있음. 

![iOS 강의-ch2 첫 앱 만들기-10~21-32](images/iOS%20강의-ch2%20첫%20앱%20만들기-10~21-32.png)

제공해주는 시스템의 경우 다크모드와 라이트모드에서 색깔을 잘 보이도록 조정해줌. System black 이 다크 모드에서 흰색으로 변하는 것처럼. 실제로 System Pink는 다크모드와 라이트모드에서 다름. 반면 커스텀 컬러는 동일함. 

요즘의 iOS 기기는 2x, 3x만 필요함. 

-
### 오토###  ### 레이아웃###  Auto Layout

스타일링을 하더라도 심미성이 깨질 수 있다. 
![iOS 강의-ch2 첫 앱 만들기-10~21-33](images/iOS%20강의-ch2%20첫%20앱%20만들기-10~21-33.png)

preview 모드에서 디바이스에서 이렇게 보인다는 것. 

![iOS 강의-ch2 첫 앱 만들기-10~21-34](images/iOS%20강의-ch2%20첫%20앱%20만들기-10~21-34.png)

아랫쪽의  아이폰 13프로, portrait, 라이트 모드에서 이렇게 보인다

![iOS 강의-ch2 첫 앱 만들기-10~21-35](images/iOS%20강의-ch2%20첫%20앱%20만들기-10~21-35.png)

좌측 하단의 아래 + 버튼을 눌러서 디바이스 추가하여 미리볼 수 있다. 

![iOS 강의-ch2 첫 앱 만들기-10~21-36](images/iOS%20강의-ch2%20첫%20앱%20만들기-10~21-36.png)

각 디바이스에서 봤을 때 이렇게 보이는데, alignment가 안 맞고, 여백이 날쭉함. 일관성을 가진 디자인을 가지고 있지 않게 된다. 

여기서 오토 레이아웃이란 개념이 나오게된다. 
어떤 디바이스가 되었건 일관적인 규칙을 통해서 사용자에게 우리가 구성한 뷰 컴포넌트를 보여주는 것. 

![iOS 강의-ch2 첫 앱 만들기-10~21-37](images/iOS%20강의-ch2%20첫%20앱%20만들기-10~21-37.png)

특히 SE를 본다면 버튼 조차 보이지 않는 것을 볼 수 있음. 
QA하다가 아이폰 SE도 제공하는 서비스라면 이런 부분이 문제가 되기 때문에  오토레이아웃을 배워야 함. 

오토레이아웃은 위치와 사이즈 정보를 결정함으로써 일관적 규칙을 제공해줄 수 있다. 

뷰 컴포넌트가 4개가 있는데 (타이틀, 이미지, 가격, 리프레시 버튼) 순서대로 살펴볼 예정 

![iOS 강의-ch2 첫 앱 만들기-10~21-38](images/iOS%20강의-ch2%20첫%20앱%20만들기-10~21-38.png)

Add Missing Constraints를 설정하면 임의로 오토레이아웃을 잡아줌. 임의로 잡기 때문에 디자인의 일관성 규칙에 대해서는 실제 서비스는 개발자가 직접 잡는 경우가 나은…

![iOS 강의-ch2 첫 앱 만들기-10~21-39](images/iOS%20강의-ch2%20첫%20앱%20만들기-10~21-39.png)

이렇게 깨질 수도 있다. 대부분은 직접 하는  게 나음.

** 타이틀 텍스트 설정 

![iOS 강의-ch2 첫 앱 만들기-10~21-40](images/iOS%20강의-ch2%20첫%20앱%20만들기-10~21-40.png)

왼쪽에 타이틀을 선택하고 ctrl 눌러서 view에 끌어놓으면 이렇게 뜸. 얘와 부모뷰사이의 관계를 정해줌. 

![iOS 강의-ch2 첫 앱 만들기-10~21-41](images/iOS%20강의-ch2%20첫%20앱%20만들기-10~21-41.png)

순서대로 Leading : 왼쪽, Top : 윗쪽, Trailing : 오른쪽 여백을 정함. 

![iOS 강의-ch2 첫 앱 만들기-10~21-42](images/iOS%20강의-ch2%20첫%20앱%20만들기-10~21-42.png)

	ctrl 눌러서 width, height도 정해줄 수 있음. 
![iOS 강의-ch2 첫 앱 만들기-10~21-43](images/iOS%20강의-ch2%20첫%20앱%20만들기-10~21-43.png)

** 이미지 설정 

사이즈를 320*320으로 정하기

위치는 x축에서 가운데, y는 현재 여백 
center horizontally in safe area, top space to safe area, 

![iOS 강의-ch2 첫 앱 만들기-10~21-44](images/iOS%20강의-ch2%20첫%20앱%20만들기-10~21-44.png)

** 버튼 설정

버튼 사이즈 : 
width : 100
height : 50

오토레이아웃 : 
부모뷰와의 관계

bottom space to safe area,
center horizontal

(constraint  제거할 경우 선택후 DELETE) 

** 가격설정

정보가 하나라도 빠지면 빨간색이 뜬다. 
![iOS 강의-ch2 첫 앱 만들기-10~21-45](images/iOS%20강의-ch2%20첫%20앱%20만들기-10~21-45.png)

x축만 설정할 경우 위처럼 Y 포지션 constraints 가 필요하다고 뜸. 

가격은 ctrl 클릭한 채로 눌러서 버튼과 Vertical spacing 을 설정

![iOS 강의-ch2 첫 앱 만들기-10~21-46](images/iOS%20강의-ch2%20첫%20앱%20만들기-10~21-46.png)

![iOS 강의-ch2 첫 앱 만들기-10~21-47](images/iOS%20강의-ch2%20첫%20앱%20만들기-10~21-47.png)

모든 뷰 컴포넌트에서  오토  레이아웃이 적용됨. 프리뷰를 통해 다른 디바이스에서도 잘 보이는지 확인하기. 

![iOS 강의-ch2 첫 앱 만들기-10~21-48](images/iOS%20강의-ch2%20첫%20앱%20만들기-10~21-48.png)

SE에서 타이틀이 깨져서 width값을 늘리고, leading, trailing constraint를 제거 후 center horizontally로 수정함. 

![iOS 강의-ch2 첫 앱 만들기-10~21-49](images/iOS%20강의-ch2%20첫%20앱%20만들기-10~21-49.png)

수정한 결과. 

오토레이아웃을 정해줄 때, 기본적으로 위치와 사이즈를 정해주어야 빨간색 표시가 나지 않음. 

-

### 앱###  ### 아이콘과###  ### 앱이름###  ### 설정하기###  

![iOS 강의-ch2 첫 앱 만들기-10~21-50](images/iOS%20강의-ch2%20첫%20앱%20만들기-10~21-50.png)

시뮬레이터를 돌리면 앱이 이렇게 보인다. 아직 앱 아이콘과 이름이 설정되지 않은 모양. 

왼쪽  폴더 패널에 Assets를 클릭. App Icon을 클릭하면 다양한 내용들을 확인할 수 있다. 

![iOS 강의-ch2 첫 앱 만들기-10~21-51](images/iOS%20강의-ch2%20첫%20앱%20만들기-10~21-51.png)

좌측부터 순서대로

앱 알림 (iPhone Notification)
설정에서 보이는 아이콘 (iPhone Settings)
아이폰 옆에서 보이는 스팟라이트 (iPhone Spotlight)

🌟실제 아이폰 앱 홈화면에서 보이는 아이콘 (iPhone App ..)
…

🌟앱스토어에 사용되는 1024x1024 pt 

-
iphone OS 2x, 60pt이지만 2x라서 120x120px 아이콘을 드래그하여 넣어줌. 

1024x1024pt 앱스토어용 이미지도 해당 위치에 드래그하여 넣어준다. 

![iOS 강의-ch2 첫 앱 만들기-10~21-52](images/iOS%20강의-ch2%20첫%20앱%20만들기-10~21-52.png)

그 다음 빌드앤 런 하면 아이콘이 바뀐 것을 확인할 수 있다.

![iOS 강의-ch2 첫 앱 만들기-10~21-53](images/iOS%20강의-ch2%20첫%20앱%20만들기-10~21-53.png)

나중에 앱을 출시할때는 큰 이미지를 가지고 
App Icon Generator(https://appicon.co) 라는 웹사이트에 올려서 필요한 사이즈를 모두 bulk로 만들어진 걸 저장하여 넣어주면 바로 넣을 수 있다.

![iOS 강의-ch2 첫 앱 만들기-10~21-54](images/iOS%20강의-ch2%20첫%20앱%20만들기-10~21-54.png)

**Display Name**

폴더 뷰(패널) 최상단의 프로젝트 이름을 클릭하면 General 탭에서 Identity 섹션 안에서 Display Name을 설정할 수 있다. 

![iOS 강의-ch2 첫 앱 만들기-10~21-55](images/iOS%20강의-ch2%20첫%20앱%20만들기-10~21-55.png)

![iOS 강의-ch2 첫 앱 만들기-10~21-56](images/iOS%20강의-ch2%20첫%20앱%20만들기-10~21-56.png)

다시 빌드앤런 하면 바뀐 앱 이름을 확인할 수 있다. 

